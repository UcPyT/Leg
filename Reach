local Players = game:GetService("Players")
local player = Players.LocalPlayer
local ball = workspace:WaitForChild("TPSSystem"):WaitForChild("TPS")

local ohInstance1 = ball
local ohString2 = "LovelyPeopleAroundMe"
local ohString3 = "HopingForTheBest"

local triggerDistance = 6 -- studs
local canFire = true

local function getHead()
    local character = player.Character or player.CharacterAdded:Wait()
    return character:WaitForChild("Head")
end

local head = getHead()

-- Listen for respawns
player.CharacterAdded:Connect(function()
    head = getHead()
end)

-- Main loop
while task.wait(0.01) do
    if ball and ball:IsDescendantOf(workspace) and head then
        local distance = (head.Position - ball.Position).Magnitude
        if distance <= triggerDistance then
            if canFire then
                canFire = false
                workspace.FE.Actions.Header:FireServer(ohInstance1, ohString2, ohString3)
            end
        else
            canFire = true -- Reset once you're far enough away
        end
    end
end
